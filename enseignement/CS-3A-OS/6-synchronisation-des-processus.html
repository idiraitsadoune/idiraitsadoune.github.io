<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<title>Les Systèmes d'exploitation : Synchronisation des processus et des threads</title>

	<link rel="stylesheet" href="../reveal-js-framework/dist/reset.css">
	<link rel="stylesheet" href="../reveal-js-framework/dist/reveal.css">
	<link rel="stylesheet" href="../reveal-js-framework/dist/theme/white.css" id="theme">
	<link rel="stylesheet" href="../resources/css/slides-style.css">
	<link rel="stylesheet" href="../../CSS/font-awesome-4.7.0/css/font-awesome.min.css" />

	<!-- Theme used for syntax highlighting of code -->
	<link rel="stylesheet" href="../resources/highlight/styles/github-dark.css">
	<link rel="stylesheet" href="../resources/css/event-b-theme.css">

	<script type="text/javascript" src="../resources/js/mathjax.js"></script>
	<script type="text/javascript" id="MathJax-script" src="../resources/MathJax/es5/tex-mml-chtml.js"></script>

	<link rel="icon" href="../resources/img/favicon.ico" />
</head>

<body>
	<img id="logo" src="../resources/img/CentraleSupelec-Logo-V_RVB.png" alt="">
	<div class="reveal">
		<div class="slides">
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out" data-background="var(--r-background-color)">

	<div style="display: inline-grid; margin-bottom: 30px ; column-gap: 150px; grid-template-columns: auto auto; ">
		<a href="https://lmf.cnrs.fr/" target="_blank">
			<img src="../resources/img/lmf-logo-black-rgb.png" height="80px">
		</a>
		<a href="https://www.centralesupelec.fr/" target="_blank">
			<img src="../resources/img/CentraleSupelec-Logo-H_RVB.png" height="80px">
		</a>
	</div>

	<div style="text-align: left">
		<h2>Les Systèmes d'exploitation</h2>
		<h3>Synchronisation des processus et des threads</h3>
	</div>

  <div class="description" >
		<span><span class="fa fa-graduation-cap">&#160;</span>3A - Cursus Ingénieurs - Dominante Informatique et Numérique</span><br>
		<span><span class="fa fa-university">&#160;</span>CentraleSupelec - Université Paris-Saclay - 2025/2026</span>
	</div>
		
	<div class="hero-card-id">
		<a href="https://wdi.centralesupelec.fr/aitsadoune/" target="_blank">
			<img src="../resources/img/idir.png" class="hero-user">
		</a>
		<div class="hero-desc">
			<a href="https://wdi.centralesupelec.fr/aitsadoune/" target="_blank">
				<span class="hero-name"><strong>Idir AIT SADOUNE </strong></span>
			</a>
			<br>
			<a href="mailto:idir.aitsadoune@centralesupelec.fr" target="_blank">
				<span class="hero-email">idir.aitsadoune@centralesupelec.fr</span>
			</a>
		</div>
	</div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section id="plan"></section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2>Inter Process Communication - IPC</h2>

  <ul>
      <li>
          L'<b>OS</b> garantie l'<b>indépendance des processus</b>
          <ul>
              <li class="fragment">par l'<i>ordonnanceur CPU</i></li>
              <li class="fragment">par la <i>gestion mémoire</i> que l'on verra plus tard</li>
          </ul>
      </li>
      <li class="fragment skip">
          <i>Un processus</i> peut <b>communiquer</b> avec <i>d'autres processus</i>
          ou avec des périphériques (fichiers, imprimantes, réseaux, ...).
      </li>
      <li class="fragment skip">
          Il est nécessaire de mettre en oeuvre un des <i>mécanismes</i> qui permettent <br>
          aux processus d'<i>échanger des données</i> et de <i>se synchroniser</i> dans un <b>OS</b>.
          <ul>
            <li class="fragment">
              <strong>Objectif</strong>  $\to$ coordonner l'exécution et partager l'information entre processus.
            </li>
          </ul>
      </li>
  </ul>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2>Principales méthodes <br> de communications</h2>

  <table style="font-size: 30px ;">
      <thead>
          <tr style="background-color:DeepSkyBlue ;">
              <th>Méthode</th>
              <th>Description</th>
          </tr>
      </thead>
      <tbody>
          <tr class="fragment">
              <td><b>Signal</b></td>
              <td>Un message système est envoyé d'un processus <br> à un autre.</td>
          </tr>
          <tr class="fragment">
              <td><b>Pipe</b></td>
              <td>Un canal unidirectionnel ; les données émises <br> sont accumulées dans une mémoire tampon (FIFO).</td>
          </tr>
          <tr class="fragment">
              <td><b>File</b></td>
              <td>Lecture/Écriture dans un fichier.</td>
          </tr>
          <tr class="fragment">
              <td><b>Socket</b></td>
              <td>Un flux de données envoyé à travers une interface réseau <br>
                  à un autre processus.</td>
          </tr>
          <tr class="fragment">
              <td><b>Mémoire Partagée</b></td>
              <td>Espace de mémoire alloué à plusieurs processus.</td>
          </tr>
          <tr class="fragment">
              <td><b>Moniteur/Sémaphore</b></td>
              <td>Une structure de synchronisation pour les processus travaillant sur des ressources
                  partagées.</td>
          </tr>
      </tbody>
  </table>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Problème de la concurrence</h2>
  <h3>Exemple de variable partagée</h3>

  <div class="left-content">
      <p class="fragment">Soit la gestion d'un compte bancaire </p>
      <ul>
          <li class="fragment">Une variable partagée <cs-code>balance</cs-code></li>
          <li class="fragment">Une fonction <cs-code>add(1)</cs-code>
              (<cs-code>balance = balance + 1</cs-code>)</li>
          <li class="fragment">Une fonction <cs-code>sub(1)</cs-code>
              (<cs-code>balance = balance - 1</cs-code>)</li>
          <li class="fragment">Le montant initial du compte est de <cs-code>9&#8364;</cs-code></li>
      </ul>
  </div>

  <div class="skip fragment" style="display: flex; align-items: center;">
      <pre style="width: 45%;"><code class="language-x86asm hljs" data-trim data-line-numbers><script type="text/template">
          ;add(1) or balance = balance + 1
          mov eax, balance 
          add eax, 1
          mov balance, eax
      </script></code></pre>

      <pre style="width: 45%;"><code class="language-x86asm hljs" data-trim data-line-numbers><script type="text/template">
          ;sub(1) or balance = balance - 1
          mov eax, balance 
          sub eax, 1
          mov balance, eax
      </script></code></pre>
  </div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Problème de la concurrence</h2>
  <h3>Exemple de variable partagée</h3>

  <div style="display: flex; align-items: center;">
      <pre style="width: 45%;"><code class="language-x86asm hljs" data-trim data-line-numbers><script type="text/template">
          ;add(1) or balance = balance + 1
          mov eax, balance 
          add eax, 1
          mov balance, eax
      </script></code></pre>

      <pre style="width: 45%;"><code class="language-x86asm hljs" data-trim data-line-numbers><script type="text/template">
          ;sub(1) or balance = balance - 1
          mov eax, balance 
          sub eax, 1
          mov balance, eax
      </script></code></pre>
  </div>

  <div class="left-content">
      <p>On lance 2 threads en parallèle</p>
      <ul>
          <li>Le premier thread exécute <cs-code>10 000 000</cs-code> fois
              <cs-code>add(1)</cs-code>
          </li>
          <li>Le deuxième thread exécute <cs-code>10 000 000</cs-code> fois
              <cs-code>sub(1)</cs-code>
          </li>
      </ul>
      <br>
      <ul id="fleche">
          <li class="skip">
              <b>Résultat attendu</b> $\to$ <cs-code>balance = 9&#8364;</cs-code>
          </li>
      </ul>
      <br>
      <ul id="ko">
          <li class="fragment">
              <b>Résultat obtenu</b> $\to$ <cs-code>balance = -98599&#8364;</cs-code>
          </li>
      </ul>
  </div>
    
</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Problème de la concurrence</h2>
  <h3>Exemple de variable partagée</h3>

  <div style="display: flex; align-items: center;">
      <pre style="width: 45%;"><code class="language-x86asm hljs" data-trim data-line-numbers><script type="text/template">
          ;add(1) or balance = balance + 1
          mov eax, balance 
          add eax, 1
          mov balance, eax
      </script></code></pre>

      <pre style="width: 45%;"><code class="language-x86asm hljs" data-trim data-line-numbers><script type="text/template">
          ;sub(1) or balance = balance - 1
          mov eax, balance 
          sub eax, 1
          mov balance, eax
      </script></code></pre>
  </div>

  <div class="left-content">
      Comment expliquer ces erreurs de calcul ?
      <br>
      <ul id="fleche">
          <li class="fragment">les entrelacements se font au niveau du code binaire
          <li class="fragment">couper <b>entre chaque instruction assembleur</b></li>
      </ul>
  </div>

  <div class="skip r-stack">
      <div class="fragment fade-in-then-out">
          <img src="./img/error-1.svg" alt="">
      </div>
      <div class="fragment fade-in-then-out">
          <span style="position:absolute;top:180px;left:0px;font-size: 30px;">&#128073;</span>
          <img src="./img/error-2.svg" alt="">
      </div>
      <div class="fragment fade-in-then-out">
          <span style="position:absolute;top:180px;left:560px;font-size: 30px;">&#128073;</span>
          <img src="./img/error-3.svg" alt="">
      </div>
      <div class="fragment fade-in-then-out">
          <span style="position:absolute;top:180px;left:560px;font-size: 30px;">&#128073;</span>
          <img src="./img/error-2.svg" alt="">
      </div>
      <div class="fragment fade-in-then-out">
          <span style="position:absolute;top:205px;left:0px;font-size: 30px;">&#128073;</span>
          <img src="./img/error-4.svg" alt="">
      </div>
      <div class="fragment fade-in-then-out">
          <span style="position:absolute;top:205px;left:0px;font-size: 30px;">&#128073;</span>
          <img src="./img/error-5.svg" alt="">
      </div>
      <div class="fragment fade-in-then-out">
          <span style="position:absolute;top:205px;left:0px;font-size: 30px;">&#128073;</span>
          <img src="./img/error-6.svg" alt="">
      </div>
      <div class="fragment fade-in-then-out">
          <span style="position:absolute;top:205px;left:560px;font-size: 30px;">&#128073;</span>
          <img src="./img/error-7.svg" alt="">
      </div>
      <div class="fragment fade-in-then-out">
          <span style="position:absolute;top:205px;left:560px;font-size: 30px;">&#128073;</span>
          <img src="./img/error-8.svg" alt="">
      </div>
      <div class="fragment fade-in-then-out">
          <span style="position:absolute;top:205px;left:560px;font-size: 30px;">&#128073;</span>
          <img src="./img/error-9.svg" alt="">
      </div>
      <div class="fragment fade-in-then-out">
          <span style="position:absolute;top:230px;left:0px;font-size: 30px;">&#128073;</span>
          <img src="./img/error-10.svg" alt="">
      </div>
      <div class="fragment fade-in-then-out">
          <span style="position:absolute;top:230px;left:0px;font-size: 30px;">&#128073;</span>
          <img src="./img/error-11.svg" alt="">
      </div>
      <div class="fragment fade-in-then-out">
          <span style="position:absolute;top:230px;left:0px;font-size: 30px;">&#128073;</span>
          <img src="./img/error-12.svg" alt="">
      </div>
      <div class="fragment fade-in-then-out">
          <span style="position:absolute;top:230px;left:560px;font-size: 30px;">&#128073;</span>
          <img src="./img/error-13.svg" alt="">
      </div>
      <div class="fragment fade-in">
          <span style="position:absolute;top:230px;left:560px;font-size: 30px;">&#128073;</span>
          <img src="./img/error-14.svg" alt="">
      </div>
  </div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Problème de la concurrence</h2>
  <h3>Conclusion</h3>

  <div style="display: flex; align-items: center;">
      <pre style="width: 45%;"><code class="language-x86asm hljs" data-trim data-line-numbers><script type="text/template">
          ;add(1) or balance = balance + 1
          mov eax, balance 
          add eax, 1
          mov balance, eax
      </script></code></pre>

      <pre style="width: 45%;"><code class="language-x86asm hljs" data-trim data-line-numbers><script type="text/template">
          ;sub(1) or balance = balance - 1
          mov eax, balance 
          sub eax, 1
          mov balance, eax
      </script></code></pre>
  </div>

  <div id="alert-block" class="left-content">
      <b>Après une itération</b> $\to$ <cs-code>balance = 8</cs-code>
      alors qu'on s'attend à <cs-code>balance = 9</cs-code> 
  </div>

  <ul>
    <li class="fragment skip"><b>Situation de compétition</b> $\to$ <b>erreur</b> 
      dépendant de l'<i>enchaînement</i> temporel d'événements
            impliquant une <i>ressource partagée</i> (non déterministe)</li>
            
      <ul id="ko">
        <li class="fragment skip">difficile à détecter (<b>tests</b>)</li>
        <li class="fragment">difficile à corriger (<b>debug</b>)</li>
      </ul>
    </ul>
    
</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section id="ch1" name="Les sections critiques"></section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
    <h2>Section critique</h2>

    <ul>
      <li>
        Une <b>section critique</b> désigne la <i>portion de code</i> dans laquelle un processus <br> 
        (ou un thread) accède à une <i>ressource partagée</i>.
        <ul>
          <li>ressource qui ne <i>doit pas être utilisée simultanément</i> par plusieurs processus.</li>
          <li><strong>exemple</strong> $\to$ une variable, un fichier, une structure de données en mémoire</li>
          
        </ul> 
      </li>

      <li class="skip fragment">
        Une <b>section critique</b> est un <i>bloc de code</i> qui doit <i>s'exécuter de manière exclusive</i>
        <ul>
          <li><i>un seul processus</i> à la fois peut y entrer.</li>
          <li>si un processus est dans sa section critique, <i>les autres doivent attendre</i>.</li>
          
        </ul>
      </li>

      <li class="skip fragment">Sans mécanisme de protection $\to$ deux processus peuvent modifier la ressource 
        en même temps $\to$ erreurs, données incohérentes.</li>
    </ul>

    <div class="fragment" style="display: flex; align-items: center;">
      <pre style="width: 45%;"><code class="language-x86asm hljs" data-trim data-line-numbers><script type="text/template">
          ;add(1) or balance = balance + 1
          mov eax, balance 
          add eax, 1
          mov balance, eax
      </script></code></pre>

      <pre style="width: 45%;"><code class="language-x86asm hljs" data-trim data-line-numbers><script type="text/template">
          ;sub(1) or balance = balance - 1
          mov eax, balance 
          sub eax, 1
          mov balance, eax
      </script></code></pre>
  </div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2>Conditions de la section critique <br> (selon <a href="https://fr.wikipedia.org/wiki/Edsger_Dijkstra" target="_blank">Dijkstra</a>)</h2>

  <ul>
    <li>
      Lorsqu'on déclare une <b>section critique</b>,
      on doit garantir qu'<b>au plus un seul</b> processus/thread est dans la section critique.  
    </li>

    <li class="fragment skip">
      Un bon mécanisme de gestion des sections critiques doit respecter :
      <ol>
        <li class="skip"><b>Exclusion mutuelle</b> $\to$ un seul processus dans la section critique à la fois.</li>
        <li class="skip fragment"><b>Progrès</b> $\to$ si aucun processus n'est dans la section critique, l'accès doit être possible.</li>
        <li class="skip fragment"><b>Attente bornée</b> (<b>bounded waiting</b>) $\to$ tout processus voulant entrer finira par le faire (<i>pas d'attente infinie</i>).</li>
      </ol>
    </li>
  </ul>

  <div id="alert-block" class="fragment left-content d-skip">
    Il faut définir des <b>mécanismes</b> qui garantissent ces <i>trois propriétés</i>
  </div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section id="ch2" name="Les solutions programmées"></section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Une solution pour 2 threads</h2>
  <h3>Principes</h3>

  <div class="left-content">
    Un contrôleur central qui: <br>
    <ul>
      <li>met en attente les processus/threads demandant l'accès en <b>SC</b></li>
      <li>autorise l'accès en <b>SC</b> des processus/threads <i>chacune à son tour</i></li>
    </ul>
    <br>
    <ul id="fleche">
      <li class="fragment">respecte <b>les 3 objectifs de la synchronisation</b></li>
    </ul>
  </div>

  <div class="fragment" style="display: flex; align-items: center;">
      <pre style="width: 45% ;"><code class="language-java hljs" data-trim data-line-numbers><script type="text/template">
      interface Mutex {
        abstract void commencerSC(int id);
        abstract void finirSC(int id);
        // id dans {0,1} num du thread
      }                             
      </script></code></pre>

      <pre style="width: 45% ;"><code class="language-java hljs" data-trim data-line-numbers><script type="text/template">
      //... code non critique
      my_mutex.commencerSC(my_id);
      //... code critique
      my_mutex.finirSC(my_id);
      //... code non critique
      </script></code></pre>
  </div>

  <div style="display: flex; align-items: center;">
    <ul style="width: 50% ;">
        <li class="fragment">Lorsque $t_{i}$ invoque <cs-code>commencerSC(i)</cs-code>:
            <ul>
                <li>vérifier que $t_{1-i}$ n'est pas en SC <br> <u>(sinon, attendre)</u></li>
                <li>noter que $t_{i}$ est en SC</li>
            </ul>
        </li>
    </ul>

    <ul style="width: 50% ;">
        <li class="fragment">
            Lorsque $t_{i}$ invoque <cs-code>finirSC(i)</cs-code>:
            <ul>
                <li>noter que $t_{i}$ n'est plus en SC</li>
            </ul>
        </li>
    </ul>
  </div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Une solution pour 2 threads</h2>
  <h3>Première implémentation</h3>

  <pre style="width: 80% ;"><code class="language-java hljs" data-trim data-line-numbers><script type="text/template">
  interface Mutex {
    abstract void commencerSC(int id);
    abstract void finirSC(int id);
    // id dans {0,1} num du thread
  }                             
  </script></code></pre>

  <pre style="width: 80% ;"><code class="language-java hljs" data-trim data-line-numbers="|2|4-8|10-12|"><script type="text/template">
      class Mutex1 implements Mutex{
        boolean[] est_SC = {false,false}; //pour noter qui est en SC
        
        void commencerSC(int id){
          while (est_SC[1-id])
              ; //attendre ...
          est_SC[id]=true;
        }
        
        void finirSC(int id){
          est_SC[id]=false;
        }
      }
  </script></code></pre>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Une solution pour 2 threads</h2>
  <h3>Première implémentation</h3>

  <pre style="width: 40% ;"><code class="language-java hljs" data-trim data-line-numbers><script type="text/template">
    void commencerSC(int id){
      while (est_SC[1-id])
          ; //attendre ...
      est_SC[id]=true;
    }
  </script></code></pre>

  <div class="r-stack">
      <div class="fragment fade-in-then-out">
          <img src="./img/eval-1.svg" alt="">
      </div>
      <div class="fragment fade-in-then-out">
          <span style="position:absolute;top:150px;left:250px;font-size: 30px;">id=0 &#128073;</span>
          <img src="./img/eval-1.svg" alt="">
      </div>
      <div class="fragment fade-in-then-out">
          <span style="position:absolute;top:175px;left:250px;font-size: 30px;">id=0 &#128073;</span>
          <img src="./img/eval-1.svg" alt="">
      </div>
      <div class="fragment fade-in-then-out">
          <span style="position:absolute;top:200px;left:250px;font-size: 30px;">id=0 &#128073;</span>
          <img src="./img/eval-1.svg" alt="">
      </div>
      <div class="fragment fade-in-then-out">
          <span style="position:absolute;top:225px;left:250px;font-size: 30px;">id=0 &#128073;</span>
          <img src="./img/eval-1.svg" alt="">
      </div>

      <div class="fragment fade-in-then-out">
          <span style="position:absolute;top:225px;left:250px;font-size: 30px;">id=0 &#128073;</span>
          <span style="position:absolute;top:150px;right:250px;font-size: 30px;">&#128072; id=1</span>
          <img src="./img/eval-1.svg" alt="">
      </div>
      <div class="fragment fade-in-then-out">
          <span style="position:absolute;top:225px;left:250px;font-size: 30px;">id=0 &#128073;</span>
          <span style="position:absolute;top:175px;right:250px;font-size: 30px;">&#128072; id=1</span>
          <img src="./img/eval-1.svg" alt="">
      </div>
      <div class="fragment fade-in-then-out">
          <span style="position:absolute;top:225px;left:250px;font-size: 30px;">id=0 &#128073;</span>
          <span style="position:absolute;top:200px;right:250px;font-size: 30px;">&#128072; id=1</span>
          <img src="./img/eval-1.svg" alt="">
      </div>
      <div class="fragment fade-in-then-out">
          <span style="position:absolute;top:225px;left:250px;font-size: 30px;">id=0 &#128073;</span>
          <span style="position:absolute;top:225px;right:250px;font-size: 30px;">&#128072; id=1</span>
          <img src="./img/eval-1.svg" alt="">
      </div>
      <div class="fragment fade-in-then-out">
          <span style="position:absolute;top:250px;left:250px;font-size: 30px;">id=0 &#128073;</span>
          <span style="position:absolute;top:225px;right:250px;font-size: 30px;">&#128072; id=1</span>
          <img src="./img/eval-2.svg" alt="">
      </div>
      <div class="fragment fade-in">
          <span style="position:absolute;top:250px;left:250px;font-size: 30px;">id=0 &#128073;</span>
          <span style="position:absolute;top:250px;right:250px;font-size: 30px;">&#128072; id=1</span>
          <img src="./img/eval-3.svg" alt="">
      </div>
  </div>

  <div id="alert-block" class="fragment left-content">
    <ul id="ko">
      <li>Les deux threads sont en SC!</li>
      <li class="fragment">La fonction <cs-code>commencerSC</cs-code> contient elle-même des SC!</li>
    </ul>
  </div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Une solution pour 2 threads</h2>
  <h3>Deuxième implémentation</h3>

  <pre style="width: 80% ;"><code class="language-java hljs" data-trim data-line-numbers><script type="text/template">
  interface Mutex {
    abstract void commencerSC(int id);
    abstract void finirSC(int id);
  }                             
  </script></code></pre>

  <pre style="width: 80%;"><code class="language-java hljs" data-trim data-line-numbers="|5-9|"><script type="text/template">
      //Mettre en attente le thread demandeur si l'autre est déjà en SC
      class Mutex2 implements Mutex{
        boolean[] est_SC = {false,false}; 
        
        void commencerSC(int id){
          est_SC[id]=true; //on commence par noter la SC !
          while (est_SC[1-id])
                ; 
        }
        
        void finirSC(int id){
          est_SC[id]=false;
        }
      }
  </script></code></pre>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Une solution pour 2 threads</h2>
  <h3>Deuxième implémentation</h3>

    <pre style="width: 40% ;"><code class="language-java hljs" data-trim data-line-numbers><script type="text/template">
        void commencerSC(int id){
            est_SC[id]=true;
            while (est_SC[1-id])
                ; 
        }
    </script></code></pre>

    <div class="skip r-stack">
        <div class="fragment fade-in-then-out">
            <img src="./img/eval-1.svg" alt="">
        </div>
        <div class="fragment fade-in-then-out">
            <span style="position:absolute;top:150px;left:250px;font-size: 30px;">id=0 &#128073;</span>
            <img src="./img/eval-1.svg" alt="">
        </div>

        <div class="fragment fade-in-then-out">
            <span style="position:absolute;top:175px;left:250px;font-size: 30px;">id=0 &#128073;</span>
            <img src="./img/eval-1.svg" alt="">
        </div>
        <div class="fragment fade-in-then-out">
            <span style="position:absolute;top:200px;left:250px;font-size: 30px;">id=0 &#128073;</span>
            <img src="./img/eval-2.svg" alt="">
        </div>
        <div class="fragment fade-in-then-out">
            <span style="position:absolute;top:200px;left:250px;font-size: 30px;">id=0 &#128073;</span>
            <span style="position:absolute;top:150px;right:250px;font-size: 30px;">&#128072; id=1</span>
            <img src="./img/eval-2.svg" alt="">
        </div>
        <div class="fragment fade-in-then-out">
            <span style="position:absolute;top:200px;left:250px;font-size: 30px;">id=0 &#128073;</span>
            <span style="position:absolute;top:175px;right:250px;font-size: 30px;">&#128072; id=1</span>
            <img src="./img/eval-2.svg" alt="">
        </div>
        <div class="fragment fade-in-then-out">
            <span style="position:absolute;top:200px;left:250px;font-size: 30px;">id=0 &#128073;</span>
            <span style="position:absolute;top:200px;right:250px;font-size: 30px;">&#128072; id=1</span>
            <img src="./img/eval-3.svg" alt="">
        </div>
        <div class="fragment fade-in-then-out">
            <span style="position:absolute;top:225px;left:250px;font-size: 30px;">id=0 &#128073;</span>
            <span style="position:absolute;top:200px;right:250px;font-size: 30px;">&#128072; id=1</span>
            <img src="./img/eval-3.svg" alt="">
        </div>
        <div class="fragment fade-in">
            <span style="position:absolute;top:225px;left:250px;font-size: 30px;">id=0 &#128073;</span>
            <span style="position:absolute;top:225px;right:250px;font-size: 30px;">&#128072; id=1</span>
            <img src="./img/eval-3.svg" alt="">
        </div>
    </div>

    <div id="alert-block" class="fragment left-content">
      <ul id="ko">
        <li><b>Problème</b> d'interblocage (<b>deadlock</b>) $\to$ processus bloqués indéfiniment</li>
      </ul>
    </div>
    
</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Une solution pour 2 threads</h2>
  <h3>Troisième implémentation</h3>

  <pre style="width: 80% ;"><code class="language-java hljs" data-trim data-line-numbers><script type="text/template">
  interface Mutex {
    abstract void commencerSC(int id);
    abstract void finirSC(int id);
  }                             
  </script></code></pre>

  <pre style="width: 80%;"><code class="language-java hljs" style="max-height:500px;" data-trim data-line-numbers="|3|5-10|12-14|"><script type="text/template">
      class Mutex3 implements Mutex{ //Ajout de tours de priorité
          boolean[] est_SC = {false,false}; 
          int tour = 0;
          
          void commencerSC(int id){
              tour=1-id;
              est_SC[id]=true; 
              while (est_SC[1-id] && tour==1-id)
                  ; 
          }
          
          void finirSC(int id){
              est_SC[id]=false;
          }
      }
  </script></code></pre>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Une solution pour 2 threads</h2>
  <h3>Troisième implémentation</h3>

  <pre style="width: 45% ;"><code class="language-java hljs" data-trim data-line-numbers><script type="text/template">
      void commencerSC(int id){
        tour=1-id;
        est_SC[id]=true; 
        while (est_SC[1-id] && tour==1-id)
            ; 
      }
  </script></code></pre>

    <div class="skip r-stack">
        <div class="fragment fade-in-then-out">
            <img src="./img/eval-11.svg" alt="">
        </div>
        <div class="fragment fade-in-then-out">
            <span style="position:absolute;top:150px;left:220px;font-size: 30px;">id=0 &#128073;</span>
            <img src="./img/eval-11.svg" alt="">
        </div>
        <div class="fragment fade-in-then-out">
            <span style="position:absolute;top:175px;left:220px;font-size: 30px;">id=0 &#128073;</span>
            <img src="./img/eval-11.svg" alt="">
        </div>
        <div class="fragment fade-in-then-out">
            <span style="position:absolute;top:200px;left:220px;font-size: 30px;">id=0 &#128073;</span>
            <img src="./img/eval-12.svg" alt="">
        </div>
        <div class="fragment fade-in-then-out">
            <span style="position:absolute;top:225px;left:220px;font-size: 30px;">id=0 &#128073;</span>
            <img src="./img/eval-13.svg" alt="">
        </div>
        <div class="fragment fade-in-then-out">
            <span style="position:absolute;top:225px;left:220px;font-size: 30px;">id=0 &#128073;</span>
            <span style="position:absolute;top:150px;right:220px;font-size: 30px;">&#128072; id=1</span>
            <img src="./img/eval-13.svg" alt="">
        </div>
        <div class="fragment fade-in-then-out">
            <span style="position:absolute;top:225px;left:220px;font-size: 30px;">id=0 &#128073;</span>
            <span style="position:absolute;top:175px;right:220px;font-size: 30px;">&#128072; id=1</span>
            <img src="./img/eval-13.svg" alt="">
        </div>
        <div class="fragment fade-in-then-out">
            <span style="position:absolute;top:225px;left:220px;font-size: 30px;">id=0 &#128073;</span>
            <span style="position:absolute;top:200px;right:220px;font-size: 30px;">&#128072; id=1</span>
            <img src="./img/eval-14.svg" alt="">
        </div>
        <div class="fragment fade-in-then-out">
            <span style="position:absolute;top:225px;left:220px;font-size: 30px;">id=0 &#128073;</span>
            <span style="position:absolute;top:225px;right:220px;font-size: 30px;">&#128072; id=1</span>
            <img src="./img/eval-15.svg" alt="">
        </div>
        <div class="fragment fade-in-then-out">
            <span style="position:absolute;top:225px;left:220px;font-size: 30px;">id=0 &#128073;</span>
            <span style="position:absolute;top:250px;right:220px;font-size: 30px;">&#128072; id=1</span>
            <img src="./img/eval-15.svg" alt="">
        </div>
        <div class="fragment fade-in-then-out">
            <span style="position:absolute;top:250px;left:220px;font-size: 30px;">id=0 &#128073;</span>
            <span style="position:absolute;top:250px;right:220px;font-size: 30px;">&#128072; id=1</span>
            <img src="./img/eval-15.svg" alt="">
        </div>
        <div class="fragment fade-in">
            <span style="position:absolute;top:275px;left:220px;font-size: 30px;">id=0 &#128073;</span>
            <span style="position:absolute;top:250px;right:220px;font-size: 30px;">&#128072; id=1</span>
            <img src="./img/eval-15.svg" alt="">
        </div>
    </div>

    <div id="green-block" class="fragment left-content">
      <ul id="ok">
        <li>Un seul thread est passé, l'autre est en attente</li>
      </ul>
    </div>
    
</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Une solution pour 2 threads</h2>
  <h3>Troisième implémentation</h3>
  
  <pre style="width: 45% ;"><code class="language-java hljs" data-trim data-line-numbers><script type="text/template">
      void commencerSC(int id){
        tour=1-id;
        est_SC[id]=true; 
        while (est_SC[1-id] && tour==1-id)
            ; 
      }
  </script></code></pre>

  <div class="left-content">
    <div id="alert-block" class="fragment">
        <ul id="ko">
            <li>les processus font de l'<b>attente active</b>
                $\to$ utilisation inutile du processeur
            </li> 
        </ul>
        
    </div>
    <div id="green-block" class="skip fragment">
        <ul id="ok">
            <li>privilégier les <b>mécanismes de haut niveau</b> offerts par les <b>OS</b></li>
        </ul>
    </div>
  </div>
    
</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2>Mécanismes de haut niveau</h2>

  <table style="font-size: 30px ;">
      <thead>
          <tr style="background-color:DeepSkyBlue ;">
              <th>Méthode</th>
              <th>Description</th>
          </tr>
      </thead>
      <tbody>
          <tr>
              <td><b>Signal</b></td>
              <td>Un message système est envoyé d'un processus <br> à un autre.</td>
          </tr>
          <tr>
              <td><b>Pipe</b></td>
              <td>Un canal unidirectionnel ; les données émises <br> sont accumulées dans une mémoire tampon (FIFO).</td>
          </tr>
          <tr>
              <td><b>File</b></td>
              <td>Lecture/Écriture dans un fichier.</td>
          </tr>
          <tr>
              <td><b>Socket</b></td>
              <td>Un flux de données envoyé à travers une interface réseau <br>
                  à un autre processus.</td>
          </tr>
          <tr>
              <td><b>Mémoire Partagée</b></td>
              <td>Espace de mémoire alloué à plusieurs processus.</td>
          </tr>
          <tr class="fragment highlight-red">
              <td><b>Moniteur/Sémaphore</b></td>
              <td>Une structure de synchronisation pour les processus travaillant sur des ressources
                  partagées.</td>
          </tr>
      </tbody>
  </table>
    
</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section id="ch3" name="Les mécanismes de synchronisation"></section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2>Le concept de Moniteur</h2>

  <div class="left-content">
    <b>Un moniteur</b> est un module constitué de : <br>
    <ul>
        <li>objets <i>inaccessibles</i> de l'extérieur</li>
        <li><i>fonctions</i> manipulant l'objet en <i>exclusion mutuelle</i></li>
    </ul>
    <br>
    <div class="fragment skip">
      <b>Exemple de moniteurs en Java</b>
      <ul>
        <li>
          en <b>Java</b>, on peut déclarer que des <i>blocs de code</i> sont en <b>exclusion mutuelle</b>.
          <ul>
            <li class="fragment">géré au niveau de la <b>JVM</b> (machine virtuelle de <b>Java</b>)</li>
            <li class="fragment">utilisation du mot clé <cs-code>synchronized</cs-code> $\to$ <b>un verrou</b> (<b>lock</b>) sur un objet</li>
            <li class="fragment">un seul thread dans les blocs <cs-code>synchronized</cs-code> sur le même objet</li>
          </ul>
        </li>
        <li class="fragment skip">
            un thread, qui possède un verrou, peut exécuter  
            n'importe quelle méthode, vérouillée ou non (<b>verrou récursif</b>).
        </li>
        <li class="fragment skip">
            un thread peut <b>verrouiller plusieurs objets</b> $\to$ risque <red-b>d'interblocage</red-b>.
        </li>
      </ul>
    </div>
  </div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Moniteurs en Java</h2>
  <h3>Exemple d'une variable partagée</h3>

  <pre><code class="language-java hljs" data-trim data-line-numbers="|2-3|5-8|10-13|15-17|"><script type="text/template">
      public class Account {
        // objet inaccessible de l'exterieur
        private int value; 
        
        // pas de risque sur le constructeur
        public Account(int i) { 
          this.value = i;
        }
        
        // fonctions manipulant l'objet en exclusion mutuelle
        synchronized public void add(int v){
          this.value = this.value + v;
        }
        
        synchronized public void sub(int v){
          this.value = this.value - v;
        }
      }
  </script></code></pre>
    
</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2><a href="https://fr.wikipedia.org/wiki/S%C3%A9maphore_(informatique)#:~:text=Le%20s%C3%A9maphore%20a%20%C3%A9t%C3%A9%20invent%C3%A9,les%20interblocages%20(ou%20deadlocks)." target="_blank">Sémaphore</a> - 
  <a href="https://fr.wikipedia.org/wiki/Edsger_Dijkstra" target="_blank">Dijkstra - 1962</a></h2>

  <ul>
    <li>
      Un <b>sémaphore</b> est un <i>mécanisme de synchronisation</i> utilisé 
      pour <i>contrôler l'accès</i> à des ressources partagées par plusieurs processus/threads.
    </li>

    <li class="fragment skip"><b>Un sémaphore</b> définit un objet <i>partagé</i> permettant de compter 
      <i>le nombre <br> de ressources disponibles</i>
        <ul>
            <li class="fragment">qu'on peut <i>acquérir</i> (le <b>sémaphore</b>);</li>
            <li class="fragment">qui <i>met en attente</i> ceux qui le demandent s'il n'y a pas de ressources disponibles;</li>
            <li class="fragment">qui traite les demandes dans <i>l'ordre des arrivées</i>.</li>
        </ul>
    </li>
    <li class="fragment skip">
        Tous les threads en <b>concurrence sur une ressource</b> doivent partager <b>un même sémaphore</b>
        <ul>
            <li class="fragment">on <b>acquiert</b> le sémaphore <i>avant d'entrer</i> en <b>SC</b> (l'appel système <b>Unix</b> <cs-code>sem_wait()</cs-code>);</li>
            <li class="fragment">on <b>relâche</b> le sémaphore <i>en sortant</i> de la <b>SC</b> (l'appel système <b>Unix</b> <cs-code>sem_post()</cs-code>).</li>
        </ul>
    </li>
  </ul>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;"><a href="https://fr.wikipedia.org/wiki/S%C3%A9maphore_(informatique)#:~:text=Le%20s%C3%A9maphore%20a%20%C3%A9t%C3%A9%20invent%C3%A9,les%20interblocages%20(ou%20deadlocks)." target="_blank">Sémaphore</a> - 
  <a href="https://fr.wikipedia.org/wiki/Edsger_Dijkstra" target="_blank">Dijkstra - 1962</a></h2>
  <h3>Implémentation du Sémaphore</h3>

  <p>Un <b>sémaphore</b> est un compteur protégé qui régule l'accès concurrent <br> 
    à une ressource.</p>

  <div>
    <img src="./img/f31-semaphore.png" height="420px">
  </div>
    
</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;"><a href="https://fr.wikipedia.org/wiki/S%C3%A9maphore_(informatique)#:~:text=Le%20s%C3%A9maphore%20a%20%C3%A9t%C3%A9%20invent%C3%A9,les%20interblocages%20(ou%20deadlocks)." target="_blank">Sémaphore</a> - 
  <a href="https://fr.wikipedia.org/wiki/Edsger_Dijkstra" target="_blank">Dijkstra - 1962</a></h2>
  <h3>Les propriétés d'un sémaphore</h3>

  <div>
    <img src="./img/f31-semaphore.png" height="300px">
  </div>
 
  <ul>
    <li>
        Les fonctions <cs-code>acquire</cs-code> (<cs-code>sem_wait</cs-code>)/<cs-code>release</cs-code> (<cs-code>sem_post</cs-code>) doivent être <b>atomiques</b> 
        <ul id="fleche">
          <li>elles-même des <i>sections critiques</i> pour le sémaphore ...</li>
          <li class="fragment">l'<b>OS</b> est en charge de garentir cette propriété</li>
        </ul>
    </li>
    <li class="fragment"><b>Vivacité</b> $\to$ on veut passer la main dans le bon ordre
        <ul id="fleche"><li>utilisation d'une <i>file d'attente</i> des <b>PCB</b> géré par l'<b>OS</b></li></ul>
    </li>
  </ul>
    
</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Utilisation du Sémaphore</h2>
  <h3>Schéma général</h3>

  <p>
    Schéma général de l'utilisation d'un <b>sémaphore</b>
  </p>

  <pre style="width: 50%;"><code class="language-java hljs" data-trim data-line-numbers><script type="text/template">
      Semaphore s = new Semaphore(n);
      // ... code non-critique ...
      s.acquire();
      // ... code critique ...
      s.release();
      // ... code non-critique ...
  </script></code></pre>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Utilisation du Sémaphore</h2>
  <h3>L'exclusion mutuelle</h3>

  <div>
    <p>Un <b>sémaphore</b> permettant de faire de l'<b>exclusion mutuelle</b><br> est un sémaphore 
    dont la <i>valeur initiale est 1</i>.</p>
  </div>

  <div style="padding-left: 10%; padding-right: 10%;">
    <pre><code class="language-java hljs" data-trim data-line-numbers><script type="text/template">
      int cpt = 0;
      Semaphore mutex = new Semaphore(1);
    </script></code></pre>
  </div>
  
  <div class="fragment" style="display: flex; align-items: center;">
    <div style="width: 50%; padding-left: 12%;">
      <pre><code class="language-java hljs" data-trim data-line-numbers><script type="text/template">
        void Processus_1(){
            mutex.acquire();
            cpt = cpt + 1;
            mutex.release();
        }
      </script></code></pre>
    </div>
    <div style="width: 50%; padding-right: 12%;">
      <pre><code class="language-java hljs" data-trim data-line-numbers><script type="text/template">
        void Processus_2(){
            mutex.acquire();
            cpt = cpt - 1;
            mutex.release();
        }
      </script></code></pre>
    </div> 
  </div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Utilisation du Sémaphore</h2>
  <h3>Demi rendez-vous</h3>

  <div>
    <p>
      Quand un processus veut s'assurer qu'un traitement a été réalisé <br> 
      par un autre processus <i>avant</i> de réaliser le sien</u>.
    </p>
  </div>
  <div class="fragment" style="padding-left: 10%; padding-right: 10%;">
    <pre><code class="language-java hljs" data-trim data-line-numbers><script type="text/template">
      Semaphore sem = new Semaphore(0);
    </script></code></pre>
  </div>


  <div class="fragment" style="display: flex; align-items: center;">
    <div style="width: 50%; padding-left: 12%;">
      <pre><code class="language-java hljs" data-trim data-line-numbers><script type="text/template">
        void Processus_1(){
            traitement_1();
            sem.release();
        }
      </script></code></pre>
    </div>
    <div style="width: 50%; padding-right: 12%;">
      <pre><code class="language-java hljs" data-trim data-line-numbers><script type="text/template">
        void Processus_2(){
            sem.acquire();
            traitement_2();
        }
      </script></code></pre>
    </div>   
  </div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Utilisation du Sémaphore</h2>
  <h3>Rendez-vous</h3>

  <div>
    <p>
      Permet à deux processus de définir un <i>point de synchronisation</i>.
    </p>
  </div>

  <div class="fragment" style="padding-left: 10%; padding-right: 10%;">
    <pre><code class="language-java hljs" data-trim data-line-numbers><script type="text/template">
      Semaphore sem1 = new Semaphore(0);
      Semaphore sem2 = new Semaphore(0);
    </script></code></pre>  
  </div>

  <div class="fragment" style="display: flex; align-items: center;">
    <div style="width: 50%; padding-left: 12%;">
      <pre><code class="language-java hljs" data-trim data-line-numbers><script type="text/template">
        void Processus_1(){
            traitement_11();
            sem1.release(); 
            sem2.acquire();
            traitement_12();
        }
      </script></code></pre>
    </div>
    <div style="width: 50%; padding-right: 12%;">
      <pre><code class="language-java hljs" data-trim data-line-numbers><script type="text/template">
        void Processus_2(){
            traitement_21();
            sem2.release(); 
            sem1.acquire();
            traitement_22();
        }
      </script></code></pre>
    </div>    
  </div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Utilisation du Sémaphore</h2>
  <h3>Partage de <span style="text-transform: lowercase;">$n$</span> ressources</h3>

  <div>
    <p>
      Soient <b>$n$ ressources</b> disponibles et <b>$P$ processus</b> voulant <br> 
      avoir accès à au moins l'une de ces ressources avec <i>$P>n$</i>.
    </p>
  </div>

  <div class="fragment" style="padding-left: 10%; padding-right: 10%;">
    <pre><code class="language-java hljs" data-trim data-line-numbers><script type="text/template">
      Semaphore sem = new Semaphore(n);
    </script></code></pre>
  </div>

  <div class="fragment" style="padding-left: 10%; padding-right: 10%;">
    <pre><code class="language-java hljs" data-trim data-line-numbers><script type="text/template">
      void Processus_i(){
          debutTraitement();
          sem.acquire();
          utiliserLaRessource();
          sem.release();
          finTraitement();
      }
    </script></code></pre>
  </div>
    
</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2>L'interblocage (deadlock)</h2>

  <div id="default-block">
    L'<b>interblocage</b> est une situation dans laquelle <i>plusieurs processus 
    sont bloqués indéfiniment</i> parce que chacun attend une ressource détenue par un autre.
  </div>

  <div class="left-content fragment">
    Pour produire un <b>deadlock</b>, ces conditions doivent être vraies simultanément 
    (<b>conditions de Coffman</b>) :
    <br>

    <ol>
      <li class="fragment">
        <b>Exclusion mutuelle</b>
        <ul><li>une ressource ne peut être utilisée que par un seul processus à la fois.</li></ul>
      </li>

      <li class="fragment">
        <b>Rétention et attente</b>
        <ul><li>un processus garde une ressource tout en attendant une autre.</li></ul>
      </li>

      <li class="fragment">
        <b>Non-préemption</b>
        <ul><li>une ressource ne peut pas être retirée de force à un processus.</li></ul>
      </li>

      <li class="fragment">
        <b>Attente circulaire</b>
        <ul><li>il existe une chaîne circulaire de processus où chacun attend une ressource détenue par le suivant.</li></ul>
      </li>
      </ol>
  </div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Inter-blocage (deadlock)</h2>
  <h3>Exemple</h3>

  <div style="padding-left: 10%; padding-right: 10%;">
    <pre><code class="language-java hljs" data-trim data-line-numbers><script type="text/template">
      Semaphore sem1 = new Semaphore(1);
      Semaphore sem2 = new Semaphore(1);
    </script></code></pre>
  </div>
    
  <div style="display: flex; align-items: center;">
    <div data-id="code-animation-1" style="width: 50%; padding-left: 12%;">
      <pre><code class="language-java hljs" data-trim data-line-numbers="|2,3,6,7"><script type="text/template">
        void Processus_1(){
            sem1.acquire();
            sem2.acquire();
            utiliserRessource1();
            utiliserRessource2();
            sem1.release();
            sem2.release();
        }
      </script></code></pre>
    </div>
    <div data-id="code-animation-2" style="width: 50%; padding-right: 12%;">
      <pre><code class="language-java hljs" data-trim data-line-numbers="|2,3,6,7"><script type="text/template">
        void Processus_2(){
            sem2.acquire();
            sem1.acquire();
            utiliserRessource2();
            utiliserRessource1();
            sem1.release();
            sem2.release();
        }
      </script></code></pre>
    </div>
  </div>

  <div id="alert-block" class="fragment left-content">
    <ul id="ko">
        <li>Le programmeur doit s'assurer qu'il ne crée pas d'<b>interblocage</b></li>
    </ul>
  </div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Inter-blocage (deadlock)</h2>
  <h3>Une Solution possible</h3>

  <div style="padding-left: 10%; padding-right: 10%;">
    <pre><code class="language-java hljs" data-trim data-line-numbers><script type="text/template">
      Semaphore sem1 = new Semaphore(1);
      Semaphore sem2 = new Semaphore(1);
    </script></code></pre>
  </div>

  <div style="display: flex; align-items: center;">
    <div data-id="code-animation-1" style="width: 50%; padding-left: 12%;">
      <pre><code class="language-java hljs" data-trim data-line-numbers="2,4,5,7"><script type="text/template">
        void Processus_1(){
          sem1.acquire();
          utiliserRessource1();
          sem1.release();
          sem2.acquire();
          utiliserRessource2();
          sem2.release();
        }
      </script></code></pre>
    </div>
    <div data-id="code-animation-2" style="width: 50%; padding-right: 12%;">
      <pre><code class="language-java hljs" data-trim data-line-numbers="2,4,5,7"><script type="text/template">
        void Processus_2(){
          sem2.acquire();
          utiliserRessource2();
          sem2.release();
          sem1.acquire();
          utiliserRessource1();
          sem1.release();
        }
      </script></code></pre>
    </div>
  </div>

  <div id="green-block" class="fragment left-content">
    <ul id="ok">
        <li>Chaque processus ou thread doit <b>acquérir</b> et <b>utiliser séparément <br> les sémaphores</b> associés aux ressources partagées.</li>
    </ul>
  </div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section id="ch4" name="La synthèse"></section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2>Synthèse</h2>

  <ul>
      <li class="fragment skip">Problème d'utilisation des <b>ressources partagées</b></li>
      <li class="fragment skip"><b>Exemple</b> : accès à une variable partagée</li>
      <li class="fragment skip">Notion de <b>section critique</b></li>
      <li class="fragment skip">Propriétés d'<b>exclusion mutuelle</b>, de <b>déroulement</b> et de <b>vivacité</b></li>
      <li class="fragment skip">Problème de l'<b>attente active</b></li>
      <li class="fragment skip"><b>Moniteurs</b></li>
      <li class="fragment skip"><b>Sémaphores</b></li>
  </ul>
  
</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
	<h1>Merci</h1>
	<p>
		<a href="./6-synchronisation-des-processus.pdf" target="_blank">Version PDF des slides</a>
	</p>
	<p>
		<a href="#">Retour à l'accueil</a>
		- <a href="#/plan">Retour au plan</a>
	</p>	
</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
    </div>
  </div>

  <script src="../resources/js/plan.js"></script>
	<script src="../reveal-js-framework/dist/reveal.js"></script>
	<script src="../reveal-js-framework/plugin/notes/notes.js"></script>
	<script src="../reveal-js-framework/plugin/markdown/markdown.js"></script>
	<script src="../reveal-js-framework/plugin/highlight/highlight.js"></script>

	<script>
		// More info about initialization & config:
		// - https://revealjs.com/initialization/
		// - https://revealjs.com/config/
		Reveal.initialize({
			// Display presentation control arrows
			controls: true,
			// Display a presentation progress bar
			progress: true,

			// Vertical centering of slides
			center: true,
			// The "normal" size of the presentation, aspect ratio will
			// be preserved when the presentation is scaled to fit different
			// resolutions. Can be specified using percentage units.
			width: 1280,
			height: 720,

			// Add the current slide number to the URL hash so that reloading the
			// page/copying the URL will return you to the same slide
			hash: true,

			slideNumber: 'c/t',

			// Learn about plugins: https://revealjs.com/plugins/
			plugins: [RevealMarkdown, RevealHighlight, RevealNotes]
		});

		Reveal.configure({ pdfSeparateFragments: false });
	</script>

</body>
</html>