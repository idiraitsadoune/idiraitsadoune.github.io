<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<title>Développement de systèmes critiques avec la méthode Event-B : The title of the chapter</title>

	<link rel="stylesheet" href="../reveal-js-framework/dist/reset.css">
	<link rel="stylesheet" href="../reveal-js-framework/dist/reveal.css">
	<link rel="stylesheet" href="../reveal-js-framework/dist/theme/white.css" id="theme">
	<link rel="stylesheet" href="../resources/css/slides-style.css">
	<link rel="stylesheet" href="../../CSS/font-awesome-4.7.0/css/font-awesome.min.css" />

	<!-- Theme used for syntax highlighting of code -->
	<link rel="stylesheet" href="../resources/highlight/styles/github-dark.css">
	<link rel="stylesheet" href="../resources/css/event-b-theme.css">

	<script type="text/javascript" src="../resources/js/mathjax.js"></script>
	<script type="text/javascript" id="MathJax-script" src="../resources/MathJax/es5/tex-mml-chtml.js"></script>

	<link rel="icon" href="../resources/img/favicon.ico" />
</head>

<body>
	<img id="logo" src="../resources/img/CentraleSupelec-Logo-V_RVB.png" alt="">
	<div class="reveal">
		<div class="slides">
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out" data-background="var(--r-background-color)">

	<div style="display: inline-grid; margin-bottom: 30px ; column-gap: 150px; grid-template-columns: auto auto; ">
		<a href="https://lmf.cnrs.fr/" target="_blank">
			<img src="../resources/img/lmf-logo-black-rgb.png" height="80px">
		</a>
		<a href="https://www.centralesupelec.fr/" target="_blank">
			<img src="../resources/img/CentraleSupelec-Logo-H_RVB.png" height="80px">
		</a>
	</div>

	<div style="text-align: left">
		<h2>Développement de systèmes critiques<br> avec la méthode Event-B</h2>
		<h3>Le concept de la modélisation par raffinement</h3>
	</div>

	<div class="description">
		<span class="fa fa-graduation-cap"></span> 3A cursus ingénieurs - Mention Sciences du Logiciel<br>
		<span class="fa fa-university"></span> CentraleSupelec - Université Paris-Saclay - 2025/2026
	</div>

	<div class="hero-card-id">
		<a href="https://wdi.centralesupelec.fr/aitsadoune/" target="_blank">
			<img src="../resources/img/idir.png" class="hero-user">
		</a>
		<div class="hero-desc">
			<a href="https://wdi.centralesupelec.fr/aitsadoune/" target="_blank">
				<span class="hero-name"><strong>Idir AIT SADOUNE </strong></span>
			</a>
			<br>
			<a href="mailto:idir.aitsadoune@centralesupelec.fr" target="_blank">
				<span class="hero-email">idir.aitsadoune@centralesupelec.fr</span>
			</a>
		</div>
	</div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section id="plan"></section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section id="ch1" name="La stratégie de raffinement"></section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
	<h2>A Situation as Seen from the Sky</h2>

  <div>
    <img data-id="img2" src="../../enseignement/CS-3A-EVENT-B/img/second-model.svg" alt="">
  </div>
    
</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
	<h2>A Situation as Seen from the Sky</h2>

	<div>
		<img data-id="img2" src="./img/bridge.svg" alt="">
	</div>
	
</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
	<h2>Our Refinement Strategy</h2>

	<ul>
    <li><b>Initial model</b> $\to$ Limiting the number of cars (<b>FUN-2</b>)</li>
    <li style="color: red;" class="skip"><red-b>First refinement</red-b> $\to$ Introducing the one way bridge (<red-b>FUN-1</red-b>, <red-b>FUN-3</red-b>)</li>
		<ul>
				<li class="skip fragment">Our <i>view</i> of the system gets <i>more accurate</i></li>
				<li class="skip fragment">We introduce the <i>bridge</i> and <i>separate it from the island</i> (<b>FUN-1</b>)</li>
				<li class="skip fragment">We <i>refine</i> the state and the events</li>
				<li class="skip fragment">We also add <i>two new events</i> $\to$ <cs-code>IL_in</cs-code> and <cs-code>IL_out</cs-code></li>
				<li class="skip fragment">We are focusing on <b>FUN-3</b> $\to$ one-way bridge</li>
			</ul>
  </ul>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section id="ch2" name="Le raffinement de l'état"></section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">First Refinement</h2>
  <h3>Introducing a One-Way Bridge</h3>

	<div>
		<img src="../../enseignement/CS-3A-EVENT-B/img/bridg-one-way.png" alt=""  height="200px"> <br>
		<img class="fragment" src="../../enseignement/CS-3A-EVENT-B/img/new-events-ref1.png" alt=""  height="200px">
	</div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2>Introducing Three New Variables</h2>
	
	<div>
		<img src="../../enseignement/CS-3A-EVENT-B/img/ref1-new-variables.png" alt="" height="200px">
	</div>

	<ul>
		<li class="skip fragment"><cs-i>$a$</cs-i> denotes the number of cars <i>on bridge</i> going <i>to island</i></li>
		<li class="skip fragment"><cs-i>$b$</cs-i> denotes the number of cars <i>on island</i></li>
		<li class="skip fragment"><cs-i>$c$</cs-i> denotes the number of cars <i>on bridge</i> going <i>to mainland</i></li>
		<li class="skip fragment"><cs-i>$a$</cs-i>, <cs-i>$b$</cs-i>, and <cs-i>$c$</cs-i> are the <i>concrete variables</i></li>
		<li class="skip fragment"><i>They replace the abstract variable</i> <cs-i>$n$</cs-i></li>
	</ul>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2>Reﬁning the State</h2>

	<ul>
		<li>Variables <cs-i>$a$</cs-i>, <cs-i>$b$</cs-i>, and <cs-i>$c$</cs-i> denote <i>natural numbers</i>
<pre id="eb" class="math-code" style="width: 50%;">
<b>VARIABLES</b>
	$a$ $b$ $c$ 
<b>INVARIANTS</b>
	<u>inv1_1:</u> $a \in \mathbb N$
	<u>inv1_2:</u> $b \in \mathbb N$
	<u>inv1_3:</u> $c \in \mathbb N$
</pre>
		</li>
	</ul>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Reﬁning the State</h2>
	<h3>Introducing New Invariants</h3>

	<ul>
		<li>Relating the <i>concrete state</i> (<cs-i>$a$</cs-i>, <cs-i>$b$</cs-i>, <cs-i>$c$</cs-i>) 
			to the <i>abstract state</i> (<cs-i>$n$</cs-i>)
<pre id="eb" class="math-code" style="width: 50%;">
<b>INVARIANTS</b>
	...
	<u>inv1_4:</u> $a + b + c = n$
</pre>
		</li>

		<li class="fragment skip">Formalizing the new invariant $\to$ <i>one way bridge</i> (this is <b>FUN-3</b>)
<pre id="eb" class="math-code" style="width: 50%;">
<b>INVARIANTS</b>
	...
	<u>inv1_5:</u> $a = 0 \lor c = 0$
</pre>
		</li>

		<li class="fragment skip">Invariants <cs-code>inv1_1</cs-code> to <cs-code>inv1_5</cs-code> are called the <i>concrete invariants</i></li>
		<li  class="fragment skip"><cs-code>inv1_4</cs-code> <b>glues</b> the <i>abstract state</i>, <cs-i>$n$</cs-i>, 
			to the <i>concrete state</i>, <cs-i>$a$</cs-i>, <cs-i>$b$</cs-i>, <cs-i>$c$</cs-i></li>
	</ul>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2>Proposal for Reﬁning Event <cs-code>ML_out</cs-code></h2>

	<div>
		<img src="../../enseignement/CS-3A-EVENT-B/img/ref1_ML_out.png" alt="" height="200px">
	</div>

<pre id="eb" class="math-code fragment" style="width: 30%;">
ML_out $\mathrel{\widehat=}$
	<i>when</i>
		<u>grd1_1:</u> $a + b < d$
		<u>grd1_2:</u> $c = 0$
	<i>then</i>
		<u>act1_1:</u> $a := a + 1$
	<i>end</i>
</pre>
	
</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2>Proposal for Reﬁning Event <cs-code>ML_in</cs-code></h2>

	<div>
		<img src="../../enseignement/CS-3A-EVENT-B/img/ref1_ML_in.png" alt="" height="200px">
	</div>

<pre id="eb" class="math-code fragment" style="width: 30%;">
ML_in $\mathrel{\widehat=}$
	<i>when</i>
		<u>grd1_1:</u> $0 < c$
	<i>then</i>
		<u>act1_1:</u> $c := c - 1$
	<i>end</i>
</pre>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
	<h2 style="margin-bottom: 5px;">Before-after predicates</h2>
	<h3>Preserved Variables</h3>

	<div class="center-divs">
		<div style="width: 15%;"></div>
<pre id="eb" class="math-code" style="width: 30%;">
ML_out $\mathrel{\widehat=}$
	<i>when</i>
		<u>grd1_1:</u> $a + b < d$
		<u>grd1_2:</u> $c = 0$
	<i>then</i>
		<u>act1_1:</u> $a := a + 1$
	<i>end</i>
</pre>
		<div style="width: 10%;"></div>
<pre id="eb" class="math-code" style="width: 30%;">
ML_in $\mathrel{\widehat=}$
	<i>when</i>
		<u>grd1_1:</u> $0 < c$
	<i>then</i>
		<u>act1_1:</u> $c := c - 1$
	<i>end</i>
</pre>
		<div style="width: 15%;"></div>
	</div>

	<p class="fragment">
		<i>Before-after predicates</i> showing the <i>unmodiﬁed variables</i>
	</p>

	<div class="center-divs">
		<div class="fragment" style="width: 50%;">
			$$ a' = a + 1 \land b'=b \land c' = c $$
		</div>
		<div class="fragment" style="width: 50%;">
			$$ a' = a \land b'=b \land c' = c - 1 $$
		</div>
	</div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
	<h2>Intuition about Refinement</h2>

	<ul>
		<li>The concrete model <i>behaves as speciﬁed by the abstract model</i><br>
			(i.e., concrete model <i>does not exhibit any new behaviors)</i></li>

		<li class="skip fragment">To show this we have to prove that
			<ol>
				<li><i>every concrete event is simulated by its abstract counterpart</i><br>
					(event reﬁnement $\to$ following slides)</li>
				<li class="fragment"><i>to every concrete initial state corresponds an abstract one</i><br>
					(initial state reﬁnement $\to$ later)</li>
			</ol>
		</li>

		<li class="skip fragment">We will make these two conditions more precise and formalize<br> 
			them as <i>proof obligations</i>.</li>
	</ul>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
	<h2>Intuition about Refinement</h2>

	<div class="center-divs">
		<div style="width: 15%;"></div>
<pre id="eb" class="math-code" style="width: 30%;">
ML_out $\mathrel{\widehat=}$ <u>//abstract</u>
	<i>when</i>
		<u>grd0_1:</u> $n < d$
	<i>then</i>
		<u>act0_1:</u> $n := n + 1$
	<i>end</i>
</pre>
		<div style="width: 10%;"></div>
<pre id="eb" class="math-code" style="width: 30%;">
ML_out $\mathrel{\widehat=}$ <u>//concrete</u>
	<i>when</i>
		<u>grd1_1:</u> $a + b < d$
		<u>grd1_2:</u> $c = 0$
	<i>then</i>
		<u>act1_1:</u> $a := a + 1$
	<i>end</i>
</pre>
		<div style="width: 15%;"></div>
	</div>

	<ul>
		<li class="skip fragment">The concrete version is <i>not contradictory</i> with the abstract one</li>
		<li class="skip fragment">When the <i>concrete version is enabled</i> then <i>so is the abstract one</i></li>
		<li class="skip fragment"><i>Executions</i> seem to be <i>compatible</i></li>
	</ul>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
	<h2>Intuition about Refinement</h2>

	<div class="center-divs">
		<div style="width: 15%;"></div>
<pre id="eb" class="math-code" style="width: 30%;">
ML_in $\mathrel{\widehat=}$ <u>//abstract</u>
	<i>when</i>
		<u>grd0_1:</u> $0 < n$
	<i>then</i>
		<u>act0_1:</u> $n := n - 1$
	<i>end</i>
</pre>
		<div style="width: 10%;"></div>
<pre id="eb" class="math-code" style="width: 30%;">
ML_in $\mathrel{\widehat=}$ <u>//concrete</u>
	<i>when</i>
		<u>grd1_1:</u> $0 < c$
	<i>then</i>
		<u>act1_1:</u> $c := c - 1$
	<i>end</i>
</pre>
		<div style="width: 15%;"></div>
	</div>

	<ul>
		<li class="skip fragment">Same remarks as in the previous slide</li>
		<li class="skip fragment">But this has to be <i>conﬁrmed by well-defined proof obligations</i></li>
	</ul>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
	<h2>Proof Obligations for Refinement</h2>

	<ul>
		<li>The concrete guard is <i>stronger</i> than the abstract one</li>
		<li class="skip fragment">Each concrete action is <i>compatible</i> with its abstract counterpart</li>
	</ul>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
	<h2 style="margin-bottom: 5px;">Proving Correct Refinement</h2>
	<h3>the Situation</h3>

	<ul>
		<li>Constants <cs-i>$c$</cs-i> with <i>axioms</i> <cs-i>$A(c)$</cs-i></li>
		<li class="skip fragment">Abstract variables <cs-i>$v$</cs-i> with <i>abstract invariant</i> <cs-i>$I(c, v)$</cs-i></li>
		<li class="skip fragment">Concrete variables <cs-i>$w$</cs-i> with <i>concrete invariant</i> <cs-i>$J(c, v, w)$</cs-i></li>
		<li class="skip fragment"><i>Abstract event</i> with <i>guards</i> <cs-i>$G(c, v)$</cs-i> $\to$ <cs-i>$G_1(c, v)$</cs-i>, <cs-i>$G_2(c, v)$</cs-i>, <cs-i>$...$</cs-i></li>
		<li class="skip fragment"><i>Abstract event</i> with <i>before-after predicate</i> <cs-i>$v'= E(c, v)$</cs-i></li>
		<li class="skip fragment"><i>Concrete event</i> with <i>guards</i> <cs-i>$H(c, w)$</cs-i> and <i>b-a predicate</i> <cs-i>$w' = F (c, w)$</cs-i></li>
	</ul>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
	<h2>Correctness of Event Refinement</h2>

	<div>
		<img src="../../enseignement/CS-3A-EVENT-B/img/correctnessOfEventRef.png" alt="" height="300px">
	</div>

	<ol>
		<li class="skip fragment">The concrete guard is <i>stronger</i> than the abstract one <br>
				(<i>Guard Strengthening</i>, following slides)</li>
		<li class="skip fragment">Each concrete action is <i>simulated by</i> its abstract counterpart <br>
				(<i>Concrete Invariant Preservation</i>, later)</li>
	</ol>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
	<h2 style="margin-bottom: 5px;">Proof Obligation</h2>
	<h3>Guard Strengthening</h3>

	<div class="center-divs" style="width: 70%;">
<pre class="math-code" style="width: 55%;">
$\text{Axioms}$ 
$\text{Abstract Invariants}$
$\text{Concrete Invariants}$
$\text{Concrete Guard}$
$\vdash$ 
$\text{Abstract Guard}$ 
</pre>
<pre class="math-code" style="width: 25%;">
$A(c)$
$I(c, v)$
$J(c, v, w)$
$H(c, w)$
$\vdash$
$G_i(c, v)$
</pre>
<pre class="math-code" style="width: 20%;">
GRD
</pre>
		</div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
	<h2 style="margin-bottom: 5px;">Applying Guard Strengthening <br> to Event <cs-code>ML_out</cs-code></h2>
	<h3>Proof of <cs-code>ML_out/GRD</cs-code></h3>

	<div class="center-divs">
		<div style="width: 15%;"></div>
<pre id="eb" class="math-code" style="width: 30%;">
ML_out $\mathrel{\widehat=}$ <u>//abstract</u>
	<i>when</i>
		<u>grd0_1:</u> $n < d$
	<i>then</i>
		<u>act0_1:</u> $n := n + 1$
	<i>end</i>
</pre>
		<div style="width: 10%;"></div>
<pre id="eb" class="math-code" style="width: 30%;">
ML_out $\mathrel{\widehat=}$ <u>//concrete</u>
	<i>when</i>
		<u>grd1_1:</u> $a + b < d$
		<u>grd1_2:</u> $c = 0$
	<i>then</i>
		<u>act1_1:</u> $a := a + 1$
	<i>end</i>
</pre>
		<div style="width: 15%;"></div>
	</div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
	<h2 style="margin-bottom: 5px;">Applying Guard Strengthening <br> to Event <cs-code>ML_out</cs-code></h2>
	<h3>Proof of <cs-code>ML_out/GRD</cs-code></h3>

	<div class="center-divs">
<pre class="math-code box" style="flex: 1;">
$d \in \mathbb N$
$0 < d$
$n \in \mathbb N$
$n \leq d$
$a \in \mathbb N$
$b \in \mathbb N$
$c \in \mathbb N$
$a + b + c = n$
$a = 0 \lor c = 0$
$a + b < d$
$c = 0$
$\vdash$
$n < d$
</pre>

<pre class="math-code" style="flex: 1;">
  MON 
  $\Longrightarrow~$ 
</pre>

<pre class="math-code box" style="flex: 1;">
$a + b + c = n$
$a + b < d$
$c = 0$
$\vdash$
$n < d$
</pre>

<pre class="math-code" style="flex: 1;">
  EQ_LR
  $\Longrightarrow~$ 
</pre>

<pre class="math-code box" style="flex: 1;">
$a + b + 0 = n$
$a + b < d$
$\vdash$
$n < d$
</pre>

<pre class="math-code" style="flex: 1;">
  ARITH ...
  $\Longrightarrow~$ 
</pre>
  </div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
	<h2 style="margin-bottom: 5px;">Applying Guard Strengthening <br> to Event <cs-code>ML_out</cs-code></h2>
	<h3>Proof of <cs-code>ML_out/GRD</cs-code></h3>

	<div class="center-divs">
<pre class="math-code" style="flex: 1;">
    ARITH ...
    $\Longrightarrow$ 
</pre>
<pre class="math-code box" style="flex: 1;">
$a + b = n$
$a + b < d$
$\vdash$
$n < d$
</pre>
<pre class="math-code" style="flex: 1;">
    EQ_LR
    $\Longrightarrow$ 
</pre>
<pre class="math-code box" style="flex: 1;">
$n < d$
$\vdash$
$n < d$
</pre>
<pre class="math-code" style="flex: 1;">
    HYP
    $\surd$
</pre>
	</div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
	<h2 style="margin-bottom: 5px;">Applying Guard Strengthening <br> to Event <cs-code>ML_in</cs-code></h2>
	<h3>Proof of <cs-code>ML_in/GRD</cs-code></h3>

	<div class="center-divs">
		<div style="width: 15%;"></div>
<pre id="eb" class="math-code" style="width: 30%;">
ML_in $\mathrel{\widehat=}$ <u>//abstract</u>
	<i>when</i>
		<u>grd0_1:</u> $0 < n$
	<i>then</i>
		<u>act0_1:</u> $n := n - 1$
	<i>end</i>
</pre>
		<div style="width: 10%;"></div>
<pre id="eb" class="math-code" style="width: 30%;">
ML_in $\mathrel{\widehat=}$ <u>//concrete</u>
	<i>when</i>
		<u>grd1_1:</u> $0 < c$
	<i>then</i>
		<u>act1_1:</u> $c := c - 1$
	<i>end</i>
</pre>
		<div style="width: 15%;"></div>
	</div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
	<h2 style="margin-bottom: 5px;">Applying Guard Strengthening <br> to Event <cs-code>ML_in</cs-code></h2>
	<h3>Proof of <cs-code>ML_in/GRD</cs-code></h3>

<div class="center-divs">
<pre class="math-code box" style="flex: 1;">
$d \in \mathbb N$
$0 < d$
$n \in \mathbb N$
$n \leq d$
$a \in \mathbb N$
$b \in \mathbb N$
$c \in \mathbb N$
$a + b + c = n$
$a = 0 \lor c = 0$
$a + b < d$
$0 < c$
$\vdash$
$0 < n$
</pre>

<pre class="math-code" style="flex: 1;">
	MON 
	$\Longrightarrow~$ 
</pre>

<pre class="math-code box" style="flex: 1;">
$b \in \mathbb N$
$a + b + c = n$
$a = 0 \lor c = 0$
$0 < c$
$\vdash$
$0 < n$
</pre>

<pre class="math-code" style="flex: 1;">
  OR_L
  $\Longrightarrow~$ 
</pre>

<div style="flex: 1;">
<pre class="math-code box">
$b \in \mathbb N$
$a + b + c = n$
$a = 0$
$0 < c$
$\vdash$
$0 < n$
</pre>
<pre class="math-code box">
$b \in \mathbb N$
$a + b + c = n$
$c = 0$
$0 < c$
$\vdash$
$0 < n$
</pre>
</div>

<div style="flex: 1;">
<pre class="math-code">
  EQ_LR ...
  $\Longrightarrow~$ 
</pre>
<br><br>
<pre class="math-code">
  EQ_LR ...
  $\Longrightarrow~$ 
</pre>
</div>

  </div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
	<h2 style="margin-bottom: 5px;">Applying Guard Strengthening <br> to Event <cs-code>ML_in</cs-code></h2>
	<h3>Proof of <cs-code>ML_in/GRD</cs-code></h3>

<div class="center-divs">

<div style="flex: 1;">
<pre class="math-code">
  EQ_LR ...
  $\Longrightarrow~$ 
</pre>
<br><br>
<pre class="math-code">
  EQ_LR ...
  $\Longrightarrow~$ 
</pre>
</div>

<div style="flex: 1;">
<pre class="math-code box">
$b \in \mathbb N$
$0 + b + c = n$
$0 < c$
$\vdash$
$0 < n$
</pre>
<pre class="math-code box">
$b \in \mathbb N$
$a + b + 0 = n$
$0 < 0$
$\vdash$
$0 < n$
</pre>
</div>

<div style="flex: 1;">
<pre class="math-code">
  ARITH
  $\Longrightarrow~$ 
</pre>
<br><br>
<pre class="math-code">
  ARITH
  $\Longrightarrow~$ 
</pre>
</div>

<div style="flex: 1;">
<pre class="math-code box">
$b \in \mathbb N$
$b + c = n$
$0 < c$
$\vdash$
$0 < n$
</pre>
<pre class="math-code box">
$b \in \mathbb N$
$a + b = n$
$0 < 0$
$\vdash$
$0 < n$
</pre>
</div>

<div style="flex: 1;">
<pre class="math-code">
  ARITH
  $\Longrightarrow~$ 
</pre>
<br><br>
<pre class="math-code">
  MON
  $\Longrightarrow~$ 
</pre>
</div>

<div style="flex: 1;">
<pre class="math-code box">
$c \leq n$
$0 < c$
$\vdash$
$0 < n$
</pre>
<pre class="math-code box">
$0 < 0$
$\vdash$
$0 < n$
</pre>
</div>

</div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
	<h2 style="margin-bottom: 5px;">Applying Guard Strengthening <br> to Event <cs-code>ML_in</cs-code></h2>
	<h3>Proof of <cs-code>ML_in/GRD</cs-code></h3>

	<div class="center-divs">

<div style="flex: 1;">
<pre class="math-code">
  ARITH
  $\Longrightarrow~$ 
</pre>
<br><br>
<pre class="math-code">
  MON
  $\Longrightarrow~$ 
</pre>
</div>

<div style="flex: 1;">
<pre class="math-code box">
$c \leq n$
$0 < c$
$\vdash$
$0 < n$
</pre>
<pre class="math-code box">
$0 < 0$
$\vdash$
$0 < n$
</pre>
</div>


<div style="flex: 1;">
<pre class="math-code">
  ARITH
  $\Longrightarrow~$ 
</pre>
<br><br>
<pre class="math-code">
  ARITH
  $\Longrightarrow~$ 
</pre>
</div>

<div style="flex: 1;">
<pre class="math-code box">
$0 < n$
$\vdash$
$0 < n$
</pre>
<pre class="math-code box">
$\bot$
$\vdash$
$0 < n$
</pre>
</div>

<div style="flex: 1;">
<pre class="math-code">
  HYP
  $\surd$
</pre>
<br><br>
<pre class="math-code">
  CNRT
  $\surd$
</pre>
</div>

	</div>

	<div id="default-block" class="skip fragment left-content">
		<ul>
			<li>In the previous proof, we have used and additional inference rule</li>
			<li>It says that a <i>false hypothesis entails any goal</i> $~~~~\bot \vdash P~~~~$ <cs-code>CNTR</cs-code></li>
		</ul>
	</div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Proof Obligation</h2>
  <h3>Invariant Reﬁnement </h3>

  	<div class="center-divs" style="width: 70%;">
<pre class="math-code" style="width: 55%;">
$\text{Axioms}$ 
$\text{Abstract Invariants}$
$\text{Concrete Invariants}$
$\text{Concrete Guard}$
$\vdash$ 
$\text{Modified Concrete Invariant}$ 
</pre>
<pre class="math-code" style="width: 35%;">
$A(c)$
$I(c, v)$
$J(c, v, w)$
$H(c, w)$
$\vdash$
$J_j(c, E(c,v), F(c,w))$
</pre>
<pre class="math-code" style="width: 10%;">
INV
</pre>
		</div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Applying Invariant Reﬁnement<br> to Event <cs-code>ML_out</cs-code></h2>
  <h3>Proof of <cs-code>ML_out/inv1_4/INV</cs-code></h3>

  <div class="center-divs">
		<div style="width: 15%;"></div>
<pre id="eb" class="math-code" style="width: 30%;">
ML_out $\mathrel{\widehat=}$ <u>//abstract</u>
	<i>when</i>
		<u>grd0_1:</u> $n < d$
	<i>then</i>
		<u>act0_1:</u> $n := n + 1$
	<i>end</i>
</pre>
		<div style="width: 10%;"></div>
<pre id="eb" class="math-code" style="width: 30%;">
ML_out $\mathrel{\widehat=}$ <u>//concrete</u>
	<i>when</i>
		<u>grd1_1:</u> $a + b < d$
		<u>grd1_2:</u> $c = 0$
	<i>then</i>
		<u>act1_1:</u> $a := a + 1$
	<i>end</i>
</pre>
		<div style="width: 15%;"></div>
	</div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Applying Invariant Reﬁnement<br> to Event <cs-code>ML_out</cs-code></h2>
  <h3>Proof of <cs-code>ML_out/inv1_4/INV</cs-code></h3>

  <div class="center-divs">

<pre class="math-code box" style="flex: 1;">
$d \in \mathbb N$
$0 < d$
$n \in \mathbb N$
$n \leq d$
$a \in \mathbb N$
$b \in \mathbb N$
$c \in \mathbb N$
$a + b + c = n$
$a = 0 \lor c = 0$
$a + b < d$
$c = 0$
$\vdash$
$a + 1 + b + c = n + 1$
</pre>

<pre class="math-code" style="flex: 1;">
  MON 
  $\Longrightarrow~$ 
</pre>

<pre class="math-code box" style="flex: 1;">
$a + b + c = n$
$\vdash$
$a + 1 + b + c = n + 1$
</pre>

<pre class="math-code" style="flex: 1;">
  ARITH 
  $\Longrightarrow~$ 
</pre>

<pre class="math-code box" style="flex: 1;">
$a + b + c = n$
$\vdash$
$a + b + c + 1 = n + 1$
</pre>
  </div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Applying Invariant Reﬁnement<br> to Event <cs-code>ML_out</cs-code></h2>
  <h3>Proof of <cs-code>ML_out/inv1_4/INV</cs-code></h3>

  <div class="center-divs">

<pre class="math-code box" style="flex: 1;">
$a + b + c = n$
$\vdash$
$a + b + c + 1 = n + 1$
</pre>

<pre class="math-code" style="flex: 1;">
  EQ_LR 
  $\Longrightarrow~$ 
</pre>
  
<pre class="math-code box" style="flex: 1;">
$\vdash$
$n + 1 = n + 1$
</pre>

<pre class="math-code" style="flex: 1;">
  EQL
  $\surd$
</pre>
  </div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2>Reﬁning the Initialization <br> Event <cs-code>init</cs-code></h2>

  <ul>
    <li>Concrete initialization</li>
    <div>
      <pre id="eb" class="math-code">
<b>EVENTS</b>
  INITIALISATION $\mathrel{\widehat=}$
    $a := 0$
    $b := 0$
    $c := 0$
      </pre>
    </div>
    <li class="fragment">Corresponding after predicate</li>
      <div  class="fragment">
        <pre id="eb" class="math-code">
$a' = 0 \land b' = 0 \land c' = 0$          
        </pre>
      </div>
  </ul>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Proof Obligation</h2>
  <h3>Initialization Reﬁnement</h3>

  <ul>
		<li>Constants <cs-i>$c$</cs-i> with <i>axioms</i> <cs-i>$A(c)$</cs-i></li>
		<li class="skip fragment">Concrete invariant <cs-i>$J(c, v, w)$</cs-i></li>
		<li class="skip fragment"><i>Abstract initialization</i> with <i>after predicate</i> <cs-i>$v' = K(c)$</cs-i></li>
		<li class="skip fragment"><i>Concrete initialization</i> with <i>after predicate</i> <cs-i>$w' = L(c)$</cs-i></li>
	</ul>

  	<div class="center-divs skip fragment" style="width: 70%;">
<pre class="math-code" style="width: 55%;">
$\text{Axioms}$ 
$\vdash$ 
$\text{Modified concrete invariants}$ 
</pre>
<pre class="math-code" style="width: 35%;">
$A(c)$
$\vdash$
$J_j(c, K(c), L(c))$
</pre>
<pre class="math-code" style="width: 10%;">
INV
</pre>
		</div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Proof Obligation</h2>
  <h3>Initialization Reﬁnement</h3>

<div class="center-divs">
<div style="flex: 1;"></div>
<pre class="math-code box" style="flex: 1;">
$d \in \mathbb N$
$0 < d$
$\vdash$
$0 + 0 + 0 = 0$
$(a + b + c = n)$
</pre>
<div style="flex: 1;"></div>
<pre class="math-code box" style="flex: 1;">
$d \in \mathbb N$
$0 < d$
$\vdash$
$0 = 0 \lor 0 = 0$
$(a = 0 \lor c = 0)$
</pre>
<div style="flex: 1;"></div>
</div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section id="ch3" name="Le raffinement du comportement"></section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2>Adding new Events</h2>
  
  <ul>
    <li>new events add transitions that have <i>no abstract counterpart</i></li>
    <li class="fragment skip">can be seen as a kind of <i>internal steps</i> (w.r.t. abstract model)</li>
    <li class="fragment skip">can only be seen by an <i>observer</i> who is <em>"zooming in"</em></li>
    <li class="fragment skip"><i>temporal refinement</i>: reﬁned model has a finer time granularity</li>
  </ul>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2>Adding new Events</h2>

	<div>
		<img src="../../enseignement/CS-3A-EVENT-B/img/new-events-ref1.png" alt=""  height="300px">
	</div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2>New Event <cs-code>IL_in</cs-code></h2>

  <div>
    <img src="../../recherche/seminars/img/IL_in.png" alt="" width="400px">
  </div>

  	<div class="center-divs">
		<div style="width: 33%;"></div>
<pre id="eb" class="math-code" style="width: 34%;">
IL_in $\mathrel{\widehat=}$ 
	<i>when</i>
		<u>grd1_1:</u> $0 < a$
	<i>then</i>
		<u>act1_1:</u> $a := a - 1$
    <u>act1_2:</u> $b := b + 1$
	<i>end</i>
</pre>
		<div style="width: 33%;"></div>
	</div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2>New Event <cs-code>IL_out</cs-code></h2>

  <div>
    <img src="../../recherche/seminars/img/IL_out.png" alt="" width="400px">
  </div>

  	<div class="center-divs">
		<div style="width: 33%;"></div>
<pre id="eb" class="math-code" style="width: 34%;">
IL_out $\mathrel{\widehat=}$ 
	<i>when</i>
		<u>grd1_1:</u> $0 < b$
    <u>grd1_2:</u> $a = 0$
	<i>then</i>
		<u>act1_1:</u> $b := b - 1$
    <u>act1_2:</u> $c := c + 1$
	<i>end</i>
</pre>
		<div style="width: 33%;"></div>
	</div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2>Before-after predicates</h2>

    <div class="center-divs">
	<div style="width: 10%;"></div>
<pre id="eb" class="math-code" style="width: 35%;">
IL_in $\mathrel{\widehat=}$ 
	<i>when</i>
		<u>grd1_1:</u> $0 < a$
	<i>then</i>
		<u>act1_1:</u> $a := a - 1$
    <u>act1_2:</u> $b := b + 1$
	<i>end</i>
</pre>
		<div style="width: 10%;"></div>
<pre id="eb" class="math-code" style="width: 35%;">
IL_out $\mathrel{\widehat=}$ 
	<i>when</i>
		<u>grd1_1:</u> $0 < b$
    <u>grd1_2:</u> $a = 0$
	<i>then</i>
		<u>act1_1:</u> $b := b - 1$
    <u>act1_2:</u> $c := c + 1$
	<i>end</i>
</pre>
		<div style="width: 10%;"></div>
	</div>

  <div id="default-block" class="skip fragment left-content">
    $a' = a - 1 \land b' = b + 1 \land c' = c$ <br>
    $a' = a \land b' = b - 1 \land c' = c + 1$
  </div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2>The empty assignment <cs-code>skip</cs-code></h2>

  <ul>
    <li>The before-after predicate of <cs-code>skip</cs-code> in the <i>initial model</i> $$ n' = n$$</li>
    
    <li class="fragment">The before-after predicate of <cs-code>skip</cs-code> in the <i>first reﬁnement</i> 
    $$ a' = a \land b' = b \land c' = c $$</li>

    <li class="fragment">The guard of the <cs-code>skip</cs-code> event is <cs-code>true</cs-code>.</li>
  </ul>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2>Refinement Proof Obligations <br> for New Events</h2>

  <ul>
    <li>A new event must <i>refine an implicit event</i>, made of a <cs-code>skip</cs-code> <i>action</i>
      <ul>
        <li>Guard strengthening is <i>trivial</i></li>
        <li>Need to prove <i>invariant reﬁnement</i></li>
      </ul>
    </li>

    <li class="fragment skip">The new events <i>must not diverge</i>
      <ul>
        <li>To prove this we have to exhibit a <i>variant</i></li>
        <li>The variant yields a <i>natural number</i> (could be more complex)</li>
        <li>Each new event must <i>decrease this variant</i></li>
      </ul>
    </li>
  </ul>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2>Event <cs-code>IL_in</cs-code> refines <cs-code>skip</cs-code></h2>

  <div class="center-divs">
		<div style="width: 33%;"></div>
<pre id="eb" class="math-code" style="width: 34%;">
IL_in $\mathrel{\widehat=}$ 
	<i>when</i>
		<u>grd1_1:</u> $0 < a$
	<i>then</i>
		<u>act1_1:</u> $a := a - 1$
    <u>act1_2:</u> $b := b + 1$
	<i>end</i>
</pre>
		<div style="width: 33%;"></div>
	</div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2>Proof of <cs-code>IL_in/inv1_4/INV</cs-code></h2>

  <div class="center-divs">
<pre class="math-code box" style="flex: 1;">
$d \in \mathbb N$
$0 < d$
$n \in \mathbb N$
$n \leq d$
$a \in \mathbb N$
$b \in \mathbb N$
$c \in \mathbb N$
$a + b + c = n$
$a = 0 \lor c = 0$
$0 < a$
$\vdash$
$a -1 + b + 1 + c = n$
</pre>

<pre class="math-code" style="flex: 1;">
  MON 
  $\Longrightarrow~$ 
</pre>

<pre class="math-code box" style="flex: 1;">
$a + b + c = n$
$\vdash$
$a - 1 + b + 1 + c = n$
</pre>

<pre class="math-code" style="flex: 1;">
  ARITH
  $\Longrightarrow~$ 
</pre>

<pre class="math-code box" style="flex: 1;">
$a + b + c = n$
$\vdash$
$a + b + c = n$
</pre>

<pre class="math-code" style="flex: 1;">
  HYP
  $\surd$
</pre>
  </div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Proof Obligation</h2>
  <h3>Convergence of New Events</h3>

  <ul>
    <li>Axioms <cs-code>$A(c)$</cs-code>, invariants <cs-code>$I(c,v)$</cs-code>, concrete invariant <cs-code>$J(c,v,w)$</cs-code></li>

    <li class="skip">New event with guard <cs-code>$H(c,w)$</cs-code></li>

    <li class="skip">Variant <cs-code>$V(c,w)$</cs-code></li>
  </ul>

	<div class="center-divs skip" style="width: 70%;">
<pre class="math-code" style="width: 55%;">
$\text{Axioms}$ 
$\text{Abstract Invariants}$
$\text{Concrete Invariants}$
$\text{Concrete Guard}$
$\vdash$ 
$\text{Variant} \in \mathbb N$ 
</pre>
<pre class="math-code" style="width: 25%;">
$A(c)$
$I(c, v)$
$J(c, v, w)$
$H(c, w)$
$\vdash$
$V(c, w) \in \mathbb N$
</pre>
<pre class="math-code" style="width: 20%;">
NAT
</pre>
		</div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2 style="margin-bottom: 5px;">Proof Obligation</h2>
  <h3>Convergence of New Events</h3>

  <ul>
    <li>Axioms <cs-code>$A(c)$</cs-code>, invariants <cs-code>$I(c,v)$</cs-code>, concrete invariant <cs-code>$J(c,v,w)$</cs-code></li>

    <li class="skip">New event with guard <cs-code>$H(c,w)$</cs-code> and <i>b-a predicate</i> <cs-code>$w'=F(c,w)$</cs-code></li>

    <li class="skip">Variant <cs-code>$V(c,w)$</cs-code></li>
  </ul>

	<div class="center-divs skip" style="width: 80%;">
<pre class="math-code" style="width: 40%;">
$\text{Axioms}$ 
$\text{Abstract Invariants}$
$\text{Concrete Invariants}$
$\text{Concrete Guard}$
$\vdash$ 
$\text{Modified Var} < \text{Var}$ 
</pre>
<pre class="math-code" style="width: 40%;">
$A(c)$
$I(c, v)$
$J(c, v, w)$
$H(c, w)$
$\vdash$
$V(c,F(c,w)) < V(c,w)$
</pre>
<pre class="math-code" style="width: 20%;">
VAR
</pre>
		</div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2>Proposed Variant</h2>

  <p><i>Weighted</i> sum of $a$ and $b$</p>

  <div class="left-content">
<pre id="eb" class="math-code">
<b>VARIANT</b> 
	<u>variant_1:</u> $2 \times a + b$ 
</pre>
  </div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2>Decreasing of the Variant <br> by Event <cs-code>IL_in</cs-code></h2>

	<div class="center-divs">
		<div style="width: 15%;"></div>
<pre id="eb" class="math-code" style="width: 30%;">
IL_in $\mathrel{\widehat=}$ 
	<i>when</i>
		<u>grd1_1:</u> $0 < a$
	<i>then</i>
		<u>act1_1:</u> $a := a - 1$
    <u>act1_2:</u> $b := b + 1$
	<i>end</i>
</pre>
		<div style="width: 10%;"></div>
<pre id="eb" class="math-code box" style="width: 40%;">
$d \in \mathbb N$
$0 < d$
$n \in \mathbb N$
$n \leq d$
$a \in \mathbb N$
$b \in \mathbb N$
$c \in \mathbb N$
$a + b + c = n$
$a = 0 \lor c = 0$
$0 < a$
$\vdash$
$2 \times (a-1) + (b+1) < 2 \times a + b$
</pre>
<div style="width: 5%;"></div>
	</div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2>Decreasing of the Variant <br> by Event <cs-code>IL_out</cs-code></h2>

	<div class="center-divs">
		<div style="width: 15%;"></div>
<pre id="eb" class="math-code" style="width: 30%;">
IL_out $\mathrel{\widehat=}$ 
	<i>when</i>
		<u>grd1_1:</u> $0 < b$
    <u>grd1_2:</u> $a = 0$
	<i>then</i>
		<u>act1_1:</u> $b := b - 1$
    <u>act1_2:</u> $c := c + 1$
	<i>end</i>
</pre>
		<div style="width: 10%;"></div>
<pre id="eb" class="math-code box" style="width: 35%;">
$d \in \mathbb N$
$0 < d$
$n \in \mathbb N$
$n \leq d$
$a \in \mathbb N$
$b \in \mathbb N$
$c \in \mathbb N$
$a + b + c = n$
$a = 0 \lor c = 0$
$0 < a$
$\vdash$
$2 \times a + (b-1) < 2 \times a + b$
</pre>
<div style="width: 10%;"></div>
	</div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section id="ch4" name="Le raffinement d'un évènement"></section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
  <h2>Superposition <br> (not covered in this tutorial)</h2>

<div class="center-divs">
	<div style="width: 10%;"></div>
<pre id="eb" class="math-code" style="width: 35%;">
Abstract_Event $\mathrel{\widehat=}$ 
	<i>when</i>
		$G(c,u,v)$
	<i>then</i>
		$u := E(c,u,v)$
    <b>$v := M(c,u,v)$</b>
	<i>end</i>
</pre>
		<div style="width: 10%;"></div>
<pre id="eb" class="math-code" style="width: 35%;">
Concrete_Event $\mathrel{\widehat=}$ 
	<i>when</i>
		$H(c,v,w)$
	<i>then</i>
		<b>$v := N(c,v,w)$</b>
    $w := F(c,v,w)$
	<i>end</i>
</pre>
		<div style="width: 10%;"></div>
	</div>

	<div class="center-divs skip" style="width: 80%;">
<pre class="math-code" style="width: 40%;">
$\text{Axioms}$ 
$\text{Abstract Invariants}$
$\text{Concrete Invariants}$
$\text{Concrete Guard}$
$\vdash$ 
$\text{Same actions in}$ 
$\text{common variables}$ 
</pre>
<pre class="math-code" style="width: 40%;">
$A(c)$
$I(c, v)$
$J(c, v, w)$
$H(c, w)$
$\vdash$
$M(c,u,v) = N(c,v,w)$
</pre>
<pre class="math-code" style="width: 20%;">
SIM
</pre>
		</div>

</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<section data-auto-animate data-transition="fade-in fade-out">
	<h1>Merci</h1>
	<p>
		<a href="./2-event-b-method.pdf" target="_blank">Version PDF des slides</a>
	</p>
	<p>
		<a href="#">Retour à l'accueil</a>
		- <a href="#/plan">Retour au plan</a>
	</p>	
</section>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
		</div>
	</div>
	
	<script src="../resources/js/plan.js"></script>
	<script src="../reveal-js-framework/dist/reveal.js"></script>
	<script src="../reveal-js-framework/plugin/notes/notes.js"></script>
	<script src="../reveal-js-framework/plugin/markdown/markdown.js"></script>
	<script src="../reveal-js-framework/plugin/highlight/highlight.js"></script>

	<script>
		// More info about initialization & config:
		// - https://revealjs.com/initialization/
		// - https://revealjs.com/config/
		Reveal.initialize({
			// Display presentation control arrows
			controls: true,
			// Display a presentation progress bar
			progress: true,

			// Vertical centering of slides
			center: true,
			// The "normal" size of the presentation, aspect ratio will
			// be preserved when the presentation is scaled to fit different
			// resolutions. Can be specified using percentage units.
			width: 1280,
			height: 720,

			// Add the current slide number to the URL hash so that reloading the
			// page/copying the URL will return you to the same slide
			hash: true,

			slideNumber: 'c/t',

			// Learn about plugins: https://revealjs.com/plugins/
			plugins: [RevealMarkdown, RevealHighlight, RevealNotes]
		});

		Reveal.configure({ pdfSeparateFragments: false });
	</script>

</body>
</html>